<scr:component xmlns:scr="http://www.osgi.org/xmlns/scr/v1.1.0" immediate="true" name="org.eclipse.skalli.storage.db.storageentitymanager">
    <implementation class="org.eclipse.skalli.storage.db.StorageEntityManagerServiceImpl"/>
    <service>
        <provide interface="org.eclipse.skalli.storage.db.StorageEntityManagerService"/>
    </service>
    <reference
        target="(osgi.unit.name=store)"
        interface="org.osgi.service.jpa.EntityManagerFactoryBuilder"
        name="EntityManagerFactoryBuilder"
        policy="dynamic"
        cardinality="1..1"
        bind="bindEntityManagerFactoryBuilder"
        unbind="unbindEntityManagerFactoryBuilder"/>
    <reference
        target="(osgi.unit.name=store)"
        interface="javax.persistence.EntityManagerFactory"
        name="EntityManagerFactory"
        policy="dynamic"
        cardinality="0..1" />
</scr:component>
